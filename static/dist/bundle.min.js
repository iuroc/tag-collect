(function(){(function(){function l(i,a,u){function s(r,e){if(!a[r]){if(!i[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(c)return c(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var o=a[r]={exports:{}};i[r][0].call(o.exports,function(e){var t=i[r][1][e];return s(t||e)},o,o.exports,l,i,a,u)}return a[r].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)s(u[e]);return s}return l})()({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.Router=void 0;var n=function(){function e(e){this.routeList={};this.hashChanged=false;if(e===null||e===void 0?void 0:e.default)this.setDefaultRoute(e.default);if(e===null||e===void 0?void 0:e.routeSet)this.setRouteOption(e.routeSet)}e.prototype.setRouteOption=function(e){var t=this;if(!Array.isArray(e))throw new Error("routeSet 类型错误");e.forEach(function(e){if(typeof e=="string")t.set(e);else if(Array.isArray(e)){if(e.length==2&&typeof e[1]!="string")t.set.apply(t,e);else t.set(e)}else{throw new Error("routeSet 类型错误")}})};e.prototype.setDefaultRoute=function(e){if(typeof e=="string")this.defaultRoute=this.set(e)[0];else if(Array.isArray(e))this.defaultRoute=this.set.apply(this,e)[0];else throw new Error("default 选项类型错误")};e.prototype.set=function(e,t){var r;var n=Array.isArray(e)?e:[e];var o=[];for(var i=0;i<n.length;i++){var a=n[i];var u=t?Array.isArray(t)?t:[t]:[];var s=this.routeList[a];if(s){(r=s.event).push.apply(r,u);o.push(s);continue}var c=this.getRouteDom(a);if(!c)throw new Error('data-route="'.concat(a,'" 的 HTML 元素没有找到'));var l=this.routeList[a]={name:a,event:u,dom:c,data:{},args:[],status:0};o.push(l)}return o};e.prototype.getRouteDom=function(e,t){if(t===void 0){t=false}var r;if(t&&e)r='[data-route]:not([data-route="'.concat(e,'"]');else r=e?'[data-route="'.concat(e,'"]'):"[data-route]";var n=document.querySelectorAll(r);if(e&&!t&&n.length==0)throw new Error("".concat(r," 元素不存在"));return e&&!t?n[0]:n};e.prototype.loadRoute=function(t,e){var r=this;if(e===void 0){e=[]}this.getRouteDom(t.name,true).forEach(function(e){e.style.display="none"});this.getRouteDom(t.name).style.display="block";t.args=e;t.event.forEach(function(e){return e(t,r)})};e.prototype.start=function(){var a=this;var u=this;var e=function(e){if(e)a.hashChanged=true;var t=(e===null||e===void 0?void 0:e.newURL)||location.href;var r=new URL(t).hash;var n=r.split("/").slice(2);if(r=="")return u.loadRoute(u.defaultRoute,n);var o=r.split("/")[1];var i=u.routeList[o];if(!i)return location.hash="";u.loadRoute(i,n)};if(!this.defaultRoute)this.setDefaultRoute("home");window.addEventListener("hashchange",e);e()};e.prototype.getNowRouteName=function(){return location.hash==""?this.defaultRoute.name:location.hash.split("/")[1]};e.util={show:function(e){if(!e)return;var t=e instanceof Node?[e]:e;t.forEach(function(e){return e.style.display="block"})},hide:function(e){if(!e)return;var t=e instanceof Node?[e]:e;t.forEach(function(e){return e.style.display="none"})}};return e}();r.Router=n;r.default=n},{}],2:[function(e,t,r){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r)&255);return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};t.exports=n},{}],3:[function(e,t,r){(function(){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number){return r.rotl(e,8)&16711935|r.rotl(e,24)&4278255360}for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(Math.random()*256));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<e.length*32;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++){t.push((e[r]>>>4).toString(16));t.push((e[r]&15).toString(16))}return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3){var n=e[r]<<16|e[r+1]<<8|e[r+2];for(var o=0;o<4;o++)if(r*8+o*6<=e.length*8)t.push(i.charAt(n>>>6*(3-o)&63));else t.push("=")}return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,n=0;r<e.length;n=++r%4){if(n==0)continue;t.push((i.indexOf(e.charAt(r-1))&Math.pow(2,-2*n+8)-1)<<n*2|i.indexOf(e.charAt(r))>>>6-n*2)}return t}};t.exports=r})()},{}],4:[function(e,t,r){t.exports=function(e){return e!=null&&(n(e)||o(e)||!!e._isBuffer)};function n(e){return!!e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)}function o(e){return typeof e.readFloatLE==="function"&&typeof e.slice==="function"&&n(e.slice(0,0))}},{}],5:[function(e,t,r){(function(){var y=e("crypt"),m=e("charenc").utf8,w=e("is-buffer"),b=e("charenc").bin,S=function(e,t){if(e.constructor==String)if(t&&t.encoding==="binary")e=b.stringToBytes(e);else e=m.stringToBytes(e);else if(w(e))e=Array.prototype.slice.call(e,0);else if(!Array.isArray(e)&&e.constructor!==Uint8Array)e=e.toString();var r=y.bytesToWords(e),n=e.length*8,o=1732584193,i=-271733879,a=-1732584194,u=271733878;for(var s=0;s<r.length;s++){r[s]=(r[s]<<8|r[s]>>>24)&16711935|(r[s]<<24|r[s]>>>8)&4278255360}r[n>>>5]|=128<<n%32;r[(n+64>>>9<<4)+14]=n;var c=S._ff,l=S._gg,f=S._hh,d=S._ii;for(var s=0;s<r.length;s+=16){var v=o,h=i,p=a,g=u;o=c(o,i,a,u,r[s+0],7,-680876936);u=c(u,o,i,a,r[s+1],12,-389564586);a=c(a,u,o,i,r[s+2],17,606105819);i=c(i,a,u,o,r[s+3],22,-1044525330);o=c(o,i,a,u,r[s+4],7,-176418897);u=c(u,o,i,a,r[s+5],12,1200080426);a=c(a,u,o,i,r[s+6],17,-1473231341);i=c(i,a,u,o,r[s+7],22,-45705983);o=c(o,i,a,u,r[s+8],7,1770035416);u=c(u,o,i,a,r[s+9],12,-1958414417);a=c(a,u,o,i,r[s+10],17,-42063);i=c(i,a,u,o,r[s+11],22,-1990404162);o=c(o,i,a,u,r[s+12],7,1804603682);u=c(u,o,i,a,r[s+13],12,-40341101);a=c(a,u,o,i,r[s+14],17,-1502002290);i=c(i,a,u,o,r[s+15],22,1236535329);o=l(o,i,a,u,r[s+1],5,-165796510);u=l(u,o,i,a,r[s+6],9,-1069501632);a=l(a,u,o,i,r[s+11],14,643717713);i=l(i,a,u,o,r[s+0],20,-373897302);o=l(o,i,a,u,r[s+5],5,-701558691);u=l(u,o,i,a,r[s+10],9,38016083);a=l(a,u,o,i,r[s+15],14,-660478335);i=l(i,a,u,o,r[s+4],20,-405537848);o=l(o,i,a,u,r[s+9],5,568446438);u=l(u,o,i,a,r[s+14],9,-1019803690);a=l(a,u,o,i,r[s+3],14,-187363961);i=l(i,a,u,o,r[s+8],20,1163531501);o=l(o,i,a,u,r[s+13],5,-1444681467);u=l(u,o,i,a,r[s+2],9,-51403784);a=l(a,u,o,i,r[s+7],14,1735328473);i=l(i,a,u,o,r[s+12],20,-1926607734);o=f(o,i,a,u,r[s+5],4,-378558);u=f(u,o,i,a,r[s+8],11,-2022574463);a=f(a,u,o,i,r[s+11],16,1839030562);i=f(i,a,u,o,r[s+14],23,-35309556);o=f(o,i,a,u,r[s+1],4,-1530992060);u=f(u,o,i,a,r[s+4],11,1272893353);a=f(a,u,o,i,r[s+7],16,-155497632);i=f(i,a,u,o,r[s+10],23,-1094730640);o=f(o,i,a,u,r[s+13],4,681279174);u=f(u,o,i,a,r[s+0],11,-358537222);a=f(a,u,o,i,r[s+3],16,-722521979);i=f(i,a,u,o,r[s+6],23,76029189);o=f(o,i,a,u,r[s+9],4,-640364487);u=f(u,o,i,a,r[s+12],11,-421815835);a=f(a,u,o,i,r[s+15],16,530742520);i=f(i,a,u,o,r[s+2],23,-995338651);o=d(o,i,a,u,r[s+0],6,-198630844);u=d(u,o,i,a,r[s+7],10,1126891415);a=d(a,u,o,i,r[s+14],15,-1416354905);i=d(i,a,u,o,r[s+5],21,-57434055);o=d(o,i,a,u,r[s+12],6,1700485571);u=d(u,o,i,a,r[s+3],10,-1894986606);a=d(a,u,o,i,r[s+10],15,-1051523);i=d(i,a,u,o,r[s+1],21,-2054922799);o=d(o,i,a,u,r[s+8],6,1873313359);u=d(u,o,i,a,r[s+15],10,-30611744);a=d(a,u,o,i,r[s+6],15,-1560198380);i=d(i,a,u,o,r[s+13],21,1309151649);o=d(o,i,a,u,r[s+4],6,-145523070);u=d(u,o,i,a,r[s+11],10,-1120210379);a=d(a,u,o,i,r[s+2],15,718787259);i=d(i,a,u,o,r[s+9],21,-343485551);o=o+v>>>0;i=i+h>>>0;a=a+p>>>0;u=u+g>>>0}return y.endian([o,i,a,u])};S._ff=function(e,t,r,n,o,i,a){var u=e+(t&r|~t&n)+(o>>>0)+a;return(u<<i|u>>>32-i)+t};S._gg=function(e,t,r,n,o,i,a){var u=e+(t&n|r&~n)+(o>>>0)+a;return(u<<i|u>>>32-i)+t};S._hh=function(e,t,r,n,o,i,a){var u=e+(t^r^n)+(o>>>0)+a;return(u<<i|u>>>32-i)+t};S._ii=function(e,t,r,n,o,i,a){var u=e+(r^(t|~n))+(o>>>0)+a;return(u<<i|u>>>32-i)+t};S._blocksize=16;S._digestsize=16;t.exports=function(e,t){if(e===undefined||e===null)throw new Error("Illegal argument "+e);var r=y.wordsToBytes(S(e,t));return t&&t.asBytes?r:t&&t.asString?b.bytesToString(r):y.bytesToHex(r)}})()},{charenc:2,crypt:3,"is-buffer":4}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.router=void 0;var n=e("apee-router");var o=e("./route/home");var i=e("./route/login");r.router=new n.Router;r.router.set(["home","add","list","tag","user","login"]);r.router.set("home",o.home);r.router.set("login",i.login);r.router.start();(0,i.checkLogin)()},{"./route/home":7,"./route/login":8,"apee-router":1}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.home=void 0;var n=function(n){function e(){var t="";var e=n.dom.querySelector(".btn-list");if(!e)throw new Error(".btn-list 元素不存在");var r=[["plus-square-dotted.svg","新增收藏","add"],["card-checklist.svg","收藏列表","list"],["tags.svg","标签列表","tag"],["person-gear.svg","个人中心","user"]];r.forEach(function(e){t+='\n                <div class="col-sm-6 col-lg-4 col-xl-3 mb-4">\n                    <div class="border border-3 shadow-sm rounded-4 card card-body\n                        hover-shadow flex-row align-items-center" onclick="location.hash=\'#/'.concat(e[2],'\'">\n                        <img src="/static/img/').concat(e[0],'" class="mx-3 size-32">\n                        <div class="fs-4">').concat(e[1],"</div>\n                    </div>\n                </div>")});e.innerHTML=t}if(n.status==0){n.status=1;e()}};r.home=n},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.login=r.checkLogin=void 0;var i=e("..");var u=e("md5");var s=e("../util");function a(e){function t(){var e=i.router.getNowRouteName();if(e!="login")location.hash="/login";return false}function r(){var e=i.router.getNowRouteName();if(e=="login")location.hash="";return true}if(typeof e=="undefined")addEventListener("hashchange",a);var n=localStorage.getItem("expires");var o=(new Date).getTime();if(!n||parseInt(n)<o)return t();return r()}r.checkLogin=a;var n=document.querySelector(".login-box");var o={username:n.querySelector(".input-username"),password:n.querySelector(".input-password"),verCode:n.querySelector(".input-vercode"),getVerCode:n.querySelector(".get-vercode"),login:n.querySelector(".click-login")};var c=document.querySelector(".register-box");var l={username:c.querySelector(".input-username"),password:c.querySelector(".input-password"),repeatPassword:c.querySelector(".input-repeat-password"),email:c.querySelector(".input-email"),verCode:c.querySelector(".input-vercode"),getVerCode:c.querySelector(".get-vercode"),register:c.querySelector(".click-register")};var f=function(e){if(e.args[0]=="register"){n.style.display="none";c.style.display="block"}else{n.style.display="block";c.style.display="none"}if(e.status==0){e.status=1;l.register.addEventListener("click",h);l.getVerCode.addEventListener("click",function(){return v(l,l.email)});o.login.addEventListener("click",d);o.getVerCode.addEventListener("click",function(){return v(o,o.username)})}};r.login=f;function d(){}function v(t,e){var r=e.value;if(!(0,s.checkEmail)(r))return alert("输入的邮箱格式错误，请检查后重新输入");t.getVerCode.setAttribute("disabled","disabled");t.getVerCode.innerHTML="正在发送";function n(e){t.getVerCode.innerHTML="".concat(e," 秒")}function o(e){clearInterval(e);t.getVerCode.innerHTML="获取验证码";t.getVerCode.removeAttribute("disabled")}var i=new XMLHttpRequest;i.open("GET","/api/sendCode?to="+r);i.send();i.addEventListener("readystatechange",function(){if(i.status==200&&i.readyState==i.DONE){var e=JSON.parse(i.responseText);if(e.code==200){var t=60;var r=setInterval(function(){n(t);if(t--==0)o(r)},1e3);return}o();alert(e.msg)}})}function h(){var e=l.username.value;var t=l.password.value;var r=l.repeatPassword.value;var n=l.verCode.value;var o=l.email.value;if(!e.match(/^\w{4,20}$/))return alert("用户名必须是 4-20 位的数字、字母、下划线任意组合");if(!t.match(/^\S{6,20}$/))return alert("密码必须是 6-20 位字符串");if(t!=r)return alert("两次输入的密码不一致，请检查后重新输入");if(!(0,s.checkEmail)(o))return alert("输入的邮箱格式错误，请检查后重新输入");if(n.match(/^\s*$/))return alert("验证码不能为空");var i=new XMLHttpRequest;i.open("POST","/api/register");i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var a=new URLSearchParams;a.set("username",e);a.set("passwordMd5",u(t));a.set("email",o);a.set("verCode",n);i.send(a.toString());i.addEventListener("readystatechange",function(){if(i.status==200&&i.readyState==i.DONE){var e=JSON.parse(i.responseText);if(e.code==200){var t=e.data.expires;localStorage.setItem("expires",t);location.hash="";return}alert(e.msg)}})}},{"..":6,"../util":9,md5:5}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.checkEmail=void 0;function n(e){return e.match(/^[\w.%+-]+@[\w.]+\.[a-zA-Z]{2,}$/)}r.checkEmail=n},{}]},{},[6])})();